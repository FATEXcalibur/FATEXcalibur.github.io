{"singlePage": [], "startSite": "", "filingNum": "", "onePageListNum": 15, "commentLabelColor": "#006b75", "yearColorList": ["#bc4c00", "#0969da", "#1f883d", "#A333D0"], "i18n": "CN", "themeMode": "manual", "dayTheme": "light", "nightTheme": "dark", "urlMode": "pinyin", "script": "<script src='https://blog.meekdai.com/Gmeek/plugins/GmeekTOC.js'></script>", "style": "", "head": "", "indexScript": "", "indexStyle": "", "bottomText": "", "showPostSource": 1, "iconList": {}, "UTC": 8, "rssSplit": "sentence", "exlink": {}, "needComment": 1, "allHead": "", "title": "Saber Blog", "subTitle": "\u7528\u4e8e\u8bb0\u5f55\u5b66\u4e60\u7684\u535a\u4e3b", "avatarUrl": "https://github.githubassets.com/favicons/favicon.svg", "GMEEK_VERSION": "last", "postListJson": {"P2": {"htmlDir": "docs/post/CS61A 2.4 note.html", "labels": ["python", "CS61A"], "postTitle": "CS61A 2.4 note", "postUrl": "post/CS61A%202.4%20note.html", "postSourceUrl": "https://github.com/FATEXcalibur/FATEXcalibur.github.io/issues/2", "commentNum": 0, "wordCount": 3679, "description": "# Python \u53ef\u53d8\u5bf9\u8c61\u4e0e\u4e0d\u53ef\u53d8\u5bf9\u8c61\u5168\u9762\u603b\u7ed3\n\n## 1. \u57fa\u672c\u6982\u5ff5\n\n### \u4e0d\u53ef\u53d8\u5bf9\u8c61 (Immutable Objects)\n- **\u5b9a\u4e49**\uff1a\u521b\u5efa\u540e\u72b6\u6001\u4e0d\u80fd\u88ab\u4fee\u6539\u7684\u5bf9\u8c61\n- **\u7c7b\u578b**\uff1a`int`, `float`, `str`, `tuple`\n- **\u7279\u70b9**\uff1a\u4efb\u4f55'\u4fee\u6539'\u64cd\u4f5c\u90fd\u4f1a\u521b\u5efa\u65b0\u5bf9\u8c61\n### \u53ef\u53d8\u5bf9\u8c61 (mutable Objects)\n- **\u5b9a\u4e49**\uff1a\u521b\u5efa\u540e\u72b6\u6001\u53ef\u4ee5\u88ab\u4fee\u6539\u7684\u5bf9\u8c61\n- **\u7c7b\u578b**\uff1a`list`, `dict`\n- **\u7279\u70b9**\uff1a\u652f\u6301\u539f\u5730\u4fee\u6539\uff0c\u5bf9\u8c61\u6807\u8bc6\u4fdd\u6301\u4e0d\u53d8\n\n## 2. \u5b9e\u73b0\u673a\u5236\u5bf9\u6bd4\n\n### Python \u7684\u9650\u5236\u65b9\u5f0f\n```python\n# \u4e0d\u53ef\u53d8\u5bf9\u8c61 - \u901a\u8fc7\u63a5\u53e3\u9650\u5236\ns = 'hello'\n# s[0] = 'H'  # TypeError: \u6ca1\u6709 __setitem__ \u65b9\u6cd5\n\n# \u53ef\u53d8\u5bf9\u8c61 - \u63d0\u4f9b\u4fee\u6539\u63a5\u53e3\nlst = [1, 2, 3]\nlst[0] = 99  # \u6b63\u5e38\u5de5\u4f5c\uff0c\u6709 __setitem__ \u65b9\u6cd5\n```\n\n### \u4e0e C \u8bed\u8a00 const \u7684\u672c\u8d28\u533a\u522b\n|\u7279\u6027 | C\u8bed\u8a00 const | Python \u4e0d\u53ef\u53d8\u5bf9\u8c61|\n|:---| :---:| :---|\n|\u9650\u5236\u5c42\u9762|\u7f16\u8bd1\u65f6\u7c7b\u578b\u7cfb\u7edf|\u8fd0\u884c\u65f6\u5bf9\u8c61\u884c\u4e3a|\n|\u5185\u5b58\u4fdd\u62a4|\u53ef\u80fd\u89e6\u53d1\u6bb5\u9519\u8bef|\u53ea\u662f\u6ca1\u6709\u4fee\u6539\u63a5\u53e3|\n|\u9519\u8bef\u65f6\u673a|\u8fd0\u884c\u65f6\u53ef\u80fd\u5d29\u6e83|\u7acb\u5373\u629b\u51faTypeError|\n|\u7ed5\u8fc7\u65b9\u5f0f|\u7c7b\u578b\u8f6c\u6362\u53ef\u7ed5\u8fc7|\u65e0\u6cd5\u7ed5\u8fc7|\n\n## 3. \u5185\u5b58\u6a21\u578b\u53ef\u89c6\u5316\n\n### \u4e0d\u53ef\u53d8\u5bf9\u8c61\u7684\u5185\u5b58\u6a21\u578b\n```\nPython \u6267\u884c\u73af\u5883\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 \u547d\u540d\u7a7a\u95f4        \u2502    \u2502    \u5806\u5185\u5b58        \u2502\n\u2502 \u251c\u2500 a \u2192 0x100  \u2502\u2500\u2500\u2192\u2502 0x100: int(5)    \u2502\n\u2502 \u251c\u2500 b \u2192 0x100  \u2502\u2500\u2500\u2192\u2502 type: int        \u2502\n\u2502 \u251c\u2500 s1 \u2192 0x200 \u2502\u2500\u2500\u2192\u2502 value: 5         \u2502\n\u2502 \u2514\u2500 s2 \u2192 0x200 \u2502\u2500\u2500\u2192\u2502 refcount: 2      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                       \u2502 0x200: str('abc')\u2502\n                       \u2502 type: str       \u2502\n                       \u2502 value: 'abc'    \u2502\n                       \u2502 refcount: 2     \u2502\n                       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n```\n### \u53ef\u53d8\u5bf9\u8c61\u7684\u5185\u5b58\u6a21\u578b\n```\nPython \u6267\u884c\u73af\u5883\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 \u547d\u540d\u7a7a\u95f4        \u2502    \u2502    \u5806\u5185\u5b58        \u2502\n\u2502 \u251c\u2500 lst1 \u2192 0x300\u2502\u2500\u2500\u2192\u2502 0x300: list     \u2502\n\u2502 \u251c\u2500 lst2 \u2192 0x300\u2502\u2500\u2500\u2192\u2502 type: list      \u2502\n\u2502 \u2514\u2500 lst3 \u2192 0x400\u2502\u2500\u2500\u2192\u2502 items: [0x100, 0x500] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2502 refcount: 2     \u2502\n                       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                       \u2502 0x100: int(1)   \u2502\n                       \u2502 0x500: int(2)   \u2502\n                       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n```\n\n# 4. \u53d8\u91cf\u7cfb\u7edf\u7684\u672c\u8d28\n## Python \u53d8\u91cf = \u5bf9\u8c61\u5f15\u7528\uff08\u667a\u80fd\u6307\u9488\uff09\n```\n# \u53d8\u91cf\u540d\u672c\u8d28\u662f\u6307\u5411\u5bf9\u8c61\u7684\u5f15\u7528\na = [1, 2, 3]  # a \u662f\u6307\u5411\u5217\u8868\u5bf9\u8c61\u7684\u5f15\u7528\nb = a          # b \u6307\u5411\u540c\u4e00\u4e2a\u5bf9\u8c61\n\nprint(a is b)  # True - \u540c\u4e00\u4e2a\u5bf9\u8c61\nprint(id(a) == id(b))  # True - \u76f8\u540c\u7684\u5185\u5b58\u5730\u5740\n```\n## \u53d8\u91cf\u8d4b\u503c\u7684\u771f\u5b9e\u8fc7\u7a0b\n1. \u521b\u5efa\u5bf9\u8c61\uff08\u6216\u5728\u5806\u4e0a\u5206\u914d\u5185\u5b58\uff09\n2. \u5728\u547d\u540d\u7a7a\u95f4\u4e2d\u5efa\u7acb\u53d8\u91cf\u540d\u5230\u5bf9\u8c61\u7684\u6620\u5c04\n3. \u589e\u52a0\u5bf9\u8c61\u7684\u5f15\u7528\u8ba1\u6570\n\n# 5. \u5173\u952e\u884c\u4e3a\u5dee\u5f02\n\n## \u8d4b\u503c\u64cd\u4f5c\u7684\u5f71\u54cd\n```python\n# \u4e0d\u53ef\u53d8\u5bf9\u8c61 - \u521b\u5efa\u65b0\u5bf9\u8c61\nx = 5\nprint(f'Before: id(x) = {id(x)}')\nx = x + 1  # \u521b\u5efa\u65b0\u6574\u6570\u5bf9\u8c61\nprint(f'After: id(x) = {id(x)}')  # \u4e0d\u540c\u7684id\n\n# \u53ef\u53d8\u5bf9\u8c61 - \u4fee\u6539\u539f\u5bf9\u8c61\nlst = [1, 2, 3]\nprint(f'Before: id(lst) = {id(lst)}')\nlst.append(4)  # \u4fee\u6539\u539f\u5bf9\u8c61\nprint(f'After: id(lst) = {id(lst)}')  # \u76f8\u540c\u7684id\n```\n## \u51fd\u6570\u53c2\u6570\u4f20\u9012\n```python\ndef modify_immutable(x):\n    '''\u4e0d\u53ef\u53d8\u53c2\u6570 - \u4e0d\u5f71\u54cd\u539f\u59cb\u503c'''\n    x = x + 1  # \u521b\u5efa\u65b0\u5bf9\u8c61\n    return x\n\ndef modify_mutable(lst):\n    '''\u53ef\u53d8\u53c2\u6570 - \u4f1a\u5f71\u54cd\u539f\u59cb\u5bf9\u8c61'''\n    lst.append(99)  # \u4fee\u6539\u539f\u5bf9\u8c61\n\nnum = 5\nmodify_immutable(num)\nprint(num)  # 5 - \u4e0d\u53d8\n\nmy_list = [1, 2, 3]\nmodify_mutable(my_list)\nprint(my_list)  # [1, 2, 3, 99] - \u88ab\u4fee\u6539\n```\n\n# 6. Python \u7684\u4f18\u5316\u673a\u5236\n\n## \u5c0f\u6574\u6570\u7f13\u5b58 (-5 \u5230 256)\n```python\na = 100\nb = 100\nprint(a is b)  # True - \u540c\u4e00\u4e2a\u7f13\u5b58\u5bf9\u8c61\n\nx = 1000\ny = 1000  \nprint(x is y)  # False - \u4e0d\u540c\u5bf9\u8c61\n```\n\n## \u5b57\u7b26\u4e32\u9a7b\u7559\n```python\ns1 = 'hello'\ns2 = 'hello'\nprint(s1 is s2)  # True - \u5b57\u7b26\u4e32\u9a7b\u7559\n\ns3 = 'hello world!'\ns4 = 'hello world!'\nprint(s3 is s4)  # False - \u957f\u5b57\u7b26\u4e32\u4e0d\u9a7b\u7559\n```\n\n# 7. \u5b9e\u9645\u5e94\u7528\u6ce8\u610f\u4e8b\u9879\n## \u5e38\u89c1\u7684\u9677\u9631\n```python\n# \u9677\u96311\uff1a\u53ef\u53d8\u9ed8\u8ba4\u53c2\u6570\ndef bad_function(data=[]):  # \u9ed8\u8ba4\u53c2\u6570\u5728\u5b9a\u4e49\u65f6\u521b\u5efa\n    data.append('default')\n    return data\n\nprint(bad_function())  # ['default']\nprint(bad_function())  # ['default', 'default'] - \u610f\u5916\uff01\n\n# \u6b63\u786e\u505a\u6cd5\ndef good_function(data=None):\n    if data is None:\n        data = []  # \u6bcf\u6b21\u8c03\u7528\u65f6\u521b\u5efa\u65b0\u5217\u8868\n    data.append('default')\n    return data\n```\n\n# 8. \u8bbe\u8ba1\u54f2\u5b66\u603b\u7ed3\n## Python \u7684\u9009\u62e9\n- **\u7edf\u4e00\u5bf9\u8c61\u6a21\u578b**\uff1a\u4e00\u5207\u7686\u5bf9\u8c61\uff0c\u53d8\u91cf\u90fd\u662f\u5f15\u7528\n- **\u63a5\u53e3\u7ea7\u522b\u9650\u5236**\uff1a\u901a\u8fc7\u4e0d\u63d0\u4f9b\u4fee\u6539\u65b9\u6cd5\u5b9e\u73b0\u4e0d\u53ef\u53d8\u6027\n- **\u8fd0\u884c\u65f6\u5b89\u5168**\uff1a\u6e05\u6670\u7684\u9519\u8bef\u4fe1\u606f\uff0c\u4e0d\u4f1a\u5185\u5b58\u5d29\u6e83\n- **\u6027\u80fd\u4f18\u5316**\uff1a\u5c0f\u5bf9\u8c61\u7f13\u5b58\u3001\u5b57\u7b26\u4e32\u9a7b\u7559\n## \u4e0e C \u7684\u6838\u5fc3\u7406\u5ff5\u5dee\u5f02\n- C\uff1a\u4fe1\u4efb\u7a0b\u5e8f\u5458\uff0c\u63d0\u4f9b\u5e95\u5c42\u5185\u5b58\u63a7\u5236\n- Python\uff1a\u5b89\u5168\u7b2c\u4e00\uff0c\u901a\u8fc7\u62bd\u8c61\u9690\u85cf\u590d\u6742\u6027\n\n# 9. \u5173\u952e\u7ed3\u8bba\n1. **Python \u53d8\u91cf\u672c\u8d28\u662f\u5bf9\u8c61\u5f15\u7528**\uff0c\u7c7b\u4f3c\u4e8e\u667a\u80fd\u6307\u9488\n2. **\u4e0d\u53ef\u53d8\u6027\u901a\u8fc7\u63a5\u53e3\u8bbe\u8ba1\u5b9e\u73b0**\uff0c\u4e0d\u662f\u5185\u5b58\u4fdd\u62a4\n3. **\u6240\u6709\u4fee\u6539\u64cd\u4f5c\u90fd\u6709\u660e\u786e\u7684\u65b9\u6cd5\u652f\u6301**\n4. **\u7406\u89e3\u8fd9\u4e2a\u673a\u5236\u5bf9\u4e8e\u907f\u514d\u5e38\u89c1\u9677\u9631\u81f3\u5173\u91cd\u8981**\n5. **Python \u7684\u8bbe\u8ba1\u5728\u6613\u7528\u6027\u548c\u5b89\u5168\u6027\u4e4b\u95f4\u53d6\u5f97\u4e86\u826f\u597d\u5e73\u8861**\n\n\n\u8fd9\u79cd\u8bbe\u8ba1\u8ba9 Python \u65e2\u4fdd\u6301\u4e86\u9ad8\u7ea7\u8bed\u8a00\u7684\u6613\u7528\u6027\uff0c\u53c8\u901a\u8fc7\u6e05\u6670\u7684\u62bd\u8c61\u63d0\u4f9b\u4e86\u53ef\u9884\u6d4b\u7684\u884c\u4e3a\uff0c\u662f Python \u54f2\u5b66'\u663e\u5f0f\u4f18\u4e8e\u9690\u5f0f'\u7684\u5b8c\u7f8e\u4f53\u73b0\u3002", "top": 0, "createdAt": 1759338108, "style": "", "script": "<script src='https://blog.meekdai.com/Gmeek/plugins/GmeekTOC.js'></script>", "head": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2025-10-02", "dateLabelColor": "#0969da"}}, "singeListJson": {}, "labelColorDict": {"bug": "#d73a4a", "CS61A": "#3e7298", "documentation": "#0075ca", "duplicate": "#cfd3d7", "enhancement": "#a2eeef", "good first issue": "#7057ff", "help wanted": "#008672", "invalid": "#e4e669", "python": "#d9e8ec", "question": "#d876e3", "wontfix": "#ffffff"}, "displayTitle": "Saber Blog", "faviconUrl": "https://github.githubassets.com/favicons/favicon.svg", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "primerCSS": "<link href='https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/Primer/21.0.7/primer.css' rel='stylesheet' />", "homeUrl": "https://FATEXcalibur.github.io", "prevUrl": "disabled", "nextUrl": "disabled"}